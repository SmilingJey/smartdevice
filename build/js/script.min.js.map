{"version":3,"sources":["callback-popup.js"],"names":["callbackPopupElement","document","querySelector","closeCallbackPopup","classList","remove","window","removeEventListener","closeCallbackPopupOnESC","evt","keyCode","addEventListener","target","openButtonElement","closeButtonElement","add","focus","callbackForm","nameField","phoneField","questionField","isStorageSupport","storage","JSON","parse","localStorage","getItem","value","name","phone","question","err","setItem","stringify"],"mappings":"AAAA,cAEA,WACA,IACAA,EAAAC,SAAAC,cAAA,mBAEA,GAAAF,EAAA,CACA,IAOAG,EAAA,WACAH,EAAAI,UAAAC,OAAA,wBACAC,OAAAC,oBAAA,UAAAC,GACAP,SAAAC,cAAA,QAAAE,UAAAC,OAAA,kBAGAG,EAAA,SAAAC,GAjBA,KAkBAA,EAAAC,SACAP,KAKAH,EAAAW,iBAAA,QAAA,SAAAF,GACAA,EAAAG,SAAAZ,GACAG,MAIA,IAAAU,EAAAZ,SAAAC,cAAA,qBACAY,EAAAd,EAAAE,cAAA,0BACAW,EAAAF,iBAAA,QA5BA,WACAX,EAAAI,UAAAW,IAAA,wBACAT,OAAAK,iBAAA,UAAAH,GACAP,SAAAC,cAAA,QAAAE,UAAAW,IAAA,iBACAf,EAAAE,cAAA,yBAAAc,UAyBAF,EAAAH,iBAAA,QAAAR,GAEA,IAAAc,EAAAjB,EAAAE,cAAA,yBACAgB,EAAAD,EAAAf,cAAA,yBACAiB,EAAAF,EAAAf,cAAA,0BACAkB,EAAAH,EAAAf,cAAA,6BAEAmB,GAAA,EACA,IACA,IAAAC,EAAAC,KAAAC,MAAAC,aAAAC,QAAA,yBACAR,EAAAS,MAAAL,EAAAM,KACAT,EAAAQ,MAAAL,EAAAO,MACAT,EAAAO,MAAAL,EAAAQ,SACA,MAAAC,GACAV,GAAA,EAaAJ,EAAAN,iBAAA,SAVA,WACAU,GACAI,aAAAO,QAAA,uBAAAT,KAAAU,UAAA,CACAL,KAAAV,EAAAS,MACAE,MAAAV,EAAAQ,MACAG,SAAAV,EAAAO,YAxDA","file":"script.min.js","sourcesContent":["'use strict';\n\n(function () {\n  var ESC_KEYCODE = 27;\n  var callbackPopupElement = document.querySelector('.callback-popup');\n\n  if (callbackPopupElement) {\n    var openCallbackPopup = function () {\n      callbackPopupElement.classList.add('callback-popup--open');\n      window.addEventListener('keydown', closeCallbackPopupOnESC);\n      document.querySelector('body').classList.add('body-noscroll');\n      callbackPopupElement.querySelector('.callback-popup__name').focus();\n    };\n\n    var closeCallbackPopup = function () {\n      callbackPopupElement.classList.remove('callback-popup--open');\n      window.removeEventListener('keydown', closeCallbackPopupOnESC);\n      document.querySelector('body').classList.remove('body-noscroll');\n    };\n\n    var closeCallbackPopupOnESC = function (evt) {\n      if (evt.keyCode === ESC_KEYCODE) {\n        closeCallbackPopup();\n      }\n    };\n\n    // закрытие по click на overlay\n    callbackPopupElement.addEventListener('click', function (evt) {\n      if (evt.target === callbackPopupElement) {\n        closeCallbackPopup();\n      }\n    });\n\n    var openButtonElement = document.querySelector('.header__callback');\n    var closeButtonElement = callbackPopupElement.querySelector('.callback-popup__close');\n    openButtonElement.addEventListener('click', openCallbackPopup);\n    closeButtonElement.addEventListener('click', closeCallbackPopup);\n\n    var callbackForm = callbackPopupElement.querySelector('.callback-popup__form');\n    var nameField = callbackForm.querySelector('.callback-popup__name');\n    var phoneField = callbackForm.querySelector('.callback-popup__phone');\n    var questionField = callbackForm.querySelector('.callback-popup__question');\n\n    var isStorageSupport = true;\n    try {\n      var storage = JSON.parse(localStorage.getItem('smartdevice-callback'));\n      nameField.value = storage.name;\n      phoneField.value = storage.phone;\n      questionField.value = storage.question;\n    } catch (err) {\n      isStorageSupport = false;\n    }\n\n    var submitCallbackForm = function () {\n      if (isStorageSupport) {\n        localStorage.setItem('smartdevice-callback', JSON.stringify({\n          name: nameField.value,\n          phone: phoneField.value,\n          question: questionField.value,\n        }));\n      }\n    };\n\n    callbackForm.addEventListener('submit', submitCallbackForm);\n  }\n})();\n"]}